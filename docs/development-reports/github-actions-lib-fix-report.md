# GitHub Actions lib/ ç›®å½•é”™è¯¯ä¿®å¤æŠ¥å‘Š

## ğŸš¨ åŸå§‹é”™è¯¯

```
Run git add package.json package-lock.json CHANGELOG.md lib/
The following paths are ignored by one of your .gitignore files:
lib
hint: Use -f if you really want to add them.
hint: Disable this message with "git config set advice.addIgnoredFile false"
```

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 
CI/CD å·¥ä½œæµè¯•å›¾å°†æ„å»ºäº§ç‰© `lib/` ç›®å½•æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ï¼Œä½†è¯¥ç›®å½•è¢« `.gitignore` æ­£ç¡®æ’é™¤äº†ã€‚

### è®¾è®¡ç†å¿µå†²çª
- **é”™è¯¯åšæ³•**: å°†æ„å»ºäº§ç‰©æäº¤åˆ° git ä»“åº“
- **æ­£ç¡®åšæ³•**: æ„å»ºäº§ç‰©åº”è¯¥åœ¨å‘å¸ƒæ—¶è‡ªåŠ¨ç”Ÿæˆï¼Œä¸åº”æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶

### ä¸ºä»€ä¹ˆ lib/ ä¸åº”è¯¥è¢«æäº¤
1. **ä»“åº“æ±¡æŸ“**: æ„å»ºäº§ç‰©ä¼šè®©ä»“åº“å˜å¾—è‡ƒè‚¿
2. **ç‰ˆæœ¬å†²çª**: æ‰‹åŠ¨æ›´æ”¹å’Œè‡ªåŠ¨æ„å»ºå¯èƒ½äº§ç”Ÿå†²çª
3. **CI/CD æœ€ä½³å®è·µ**: æ„å»ºåº”è¯¥åœ¨ CI ç¯å¢ƒä¸­è¿›è¡Œ
4. **npm å‘å¸ƒæœºåˆ¶**: npm æœ‰ `prepublishOnly` é’©å­æ¥å¤„ç†å‘å¸ƒå‰æ„å»º

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. ä¿®æ”¹ CI/CD å·¥ä½œæµ

**ä¿®æ”¹å‰**:
```yaml
- name: Commit and push changes
  run: |
    git add package.json package-lock.json CHANGELOG.md lib/  # âŒ é”™è¯¯ï¼šè¯•å›¾æäº¤æ„å»ºäº§ç‰©
```

**ä¿®æ”¹å**:
```yaml
- name: Commit and push changes
  run: |
    git add package.json package-lock.json CHANGELOG.md  # âœ… æ­£ç¡®ï¼šåªæäº¤æºç å’Œé…ç½®
```

### 2. éªŒè¯ç°æœ‰é…ç½®æ­£ç¡®æ€§

#### package.json é…ç½®éªŒè¯
```json
{
  "scripts": {
    "prepublishOnly": "npm run build"  // âœ… å‘å¸ƒå‰è‡ªåŠ¨æ„å»º
  },
  "files": [
    "bin",
    "lib",      // âœ… å‘å¸ƒæ—¶åŒ…å« lib ç›®å½•
    "templates"
  ]
}
```

#### .gitignore é…ç½®éªŒè¯
```gitignore
# Build outputs
lib/        # âœ… æ­£ç¡®æ’é™¤æ„å»ºäº§ç‰©
dist/
*.tgz
```

## ğŸ”§ å·¥ä½œæµç¨‹éªŒè¯

### 1. æœ¬åœ°æ„å»ºæµ‹è¯•
```bash
# æ¸…ç†æ„å»ºäº§ç‰©
rm -rf lib/

# æ¨¡æ‹Ÿå‘å¸ƒï¼ˆä¼šè‡ªåŠ¨æ„å»ºï¼‰
npm pack --dry-run

# ç»“æœï¼šâœ… lib/ ç›®å½•è¢«æ­£ç¡®åŒ…å«åœ¨å‘å¸ƒåŒ…ä¸­
```

### 2. CI/CD æµç¨‹
1. **æµ‹è¯•é˜¶æ®µ**: 
   - âœ… å®‰è£…ä¾èµ–
   - âœ… è¿è¡Œæµ‹è¯•
   - âœ… æ„å»ºé¡¹ç›®ï¼ˆç”¨äºæµ‹è¯•ï¼‰
   - âœ… CLI åŠŸèƒ½æµ‹è¯•

2. **å‘å¸ƒé˜¶æ®µ**:
   - âœ… ç‰ˆæœ¬å·æ›´æ–°
   - âœ… æ›´æ–° CHANGELOG
   - âœ… æäº¤ç‰ˆæœ¬å˜æ›´ï¼ˆä¸åŒ…å« lib/ï¼‰
   - âœ… åˆ›å»º Git æ ‡ç­¾
   - âœ… npm å‘å¸ƒï¼ˆè‡ªåŠ¨æ„å»ºï¼‰

## ğŸ“Š ä¿®å¤éªŒè¯

### npm pack è¾“å‡ºéªŒè¯
```
ğŸ“¦  an-frame-cli@1.0.0
=== Tarball Contents ===
lib/commands/create.d.ts    # âœ… lib æ–‡ä»¶è¢«åŒ…å«
lib/commands/create.js      # âœ… 
lib/generator.d.ts          # âœ… 
lib/generator.js            # âœ… 
lib/index.d.ts              # âœ… 
lib/index.js                # âœ… 
lib/installer.d.ts          # âœ… 
lib/installer.js            # âœ… 
lib/utils.d.ts              # âœ… 
lib/utils.js                # âœ… 
total files: 36
```

### åŠŸèƒ½æµ‹è¯•éªŒè¯
```bash
npm run test:cli
# âœ… ğŸ§ª å¼€å§‹æµ‹è¯• an-frame-cli å·¥å…·...
# âœ… ğŸ‰ æ‰€æœ‰åŸºç¡€åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼
```

## ğŸ¯ æœ€ä½³å®è·µæ€»ç»“

### âœ… æ­£ç¡®çš„ CI/CD æµç¨‹
1. **æºç ç®¡ç†**: åªæäº¤æºç ã€é…ç½®æ–‡ä»¶ã€æ–‡æ¡£
2. **æ„å»ºéš”ç¦»**: æ„å»ºåœ¨ CI ç¯å¢ƒä¸­è¿›è¡Œ
3. **è‡ªåŠ¨å‘å¸ƒ**: ä½¿ç”¨ `prepublishOnly` ç¡®ä¿å‘å¸ƒå‰æ„å»º
4. **ç‰ˆæœ¬æ§åˆ¶**: åªç®¡ç†ç‰ˆæœ¬å·ã€CHANGELOG ç­‰å…ƒæ•°æ®

### âŒ é¿å…çš„é”™è¯¯åšæ³•
1. **æäº¤æ„å»ºäº§ç‰©**: ä¸è¦å°† `lib/`, `dist/` ç­‰ç›®å½•æäº¤åˆ° git
2. **æ‰‹åŠ¨å‘å¸ƒæµç¨‹**: é¿å…æ‰‹åŠ¨æ„å»ºå’Œå‘å¸ƒçš„å¤æ‚æµç¨‹
3. **å¿½ç•¥ gitignore**: ä¸è¦å¼ºåˆ¶æ·»åŠ è¢«å¿½ç•¥çš„æ–‡ä»¶

## ğŸ”„ ç›¸å…³æ–‡ä»¶ä¿®æ”¹

| æ–‡ä»¶ | ä¿®æ”¹ç±»å‹ | è¯´æ˜ |
|------|---------|------|
| `.github/workflows/ci-cd.yml` | ä¿®æ”¹ | ç§»é™¤å¯¹ lib/ ç›®å½•çš„æäº¤ |
| `.gitignore` | ä¿æŒä¸å˜ | ç»§ç»­æ’é™¤ lib/ ç›®å½• |
| `package.json` | ä¿æŒä¸å˜ | prepublishOnly å’Œ files é…ç½®æ­£ç¡® |

## ğŸš€ é¢„æœŸç»“æœ

ä¿®å¤åï¼ŒGitHub Actions åº”è¯¥èƒ½å¤Ÿï¼š
- âœ… æ­£å¸¸æ‰§è¡Œç‰ˆæœ¬æ›´æ–°å’Œ CHANGELOG ç”Ÿæˆ
- âœ… æˆåŠŸæäº¤ç‰ˆæœ¬å˜æ›´ï¼ˆä¸åŒ…å« lib/ï¼‰
- âœ… åˆ›å»º Git æ ‡ç­¾
- âœ… è‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒåˆ° npm
- âœ… åˆ›å»º GitHub Release

## ğŸ“ æ€»ç»“

è¿™ä¸ªé—®é¢˜çš„è§£å†³ä½“ç°äº†ç°ä»£ CI/CD æœ€ä½³å®è·µï¼š

1. **åˆ†ç¦»å…³æ³¨ç‚¹**: æºç å’Œæ„å»ºäº§ç‰©åˆ†ç¦»ç®¡ç†
2. **è‡ªåŠ¨åŒ–æ„å»º**: å‘å¸ƒæ—¶è‡ªåŠ¨æ„å»ºï¼Œä¸ä¾èµ–æ‰‹åŠ¨æ­¥éª¤
3. **ç‰ˆæœ¬æ§åˆ¶çº¯å‡€**: åªç®¡ç†æºç ï¼Œä¸æ±¡æŸ“ä»“åº“
4. **å‘å¸ƒå¯é æ€§**: æ¯æ¬¡å‘å¸ƒéƒ½æ˜¯æœ€æ–°æ„å»ºï¼Œç¡®ä¿ä¸€è‡´æ€§

é€šè¿‡è¿™æ¬¡ä¿®å¤ï¼Œæˆ‘ä»¬çš„ CI/CD æµç¨‹æ›´åŠ å¥å£®å’Œç¬¦åˆæœ€ä½³å®è·µã€‚

---

**ä¿®å¤å®Œæˆæ—¶é—´**: $(date)  
**å½±å“èŒƒå›´**: CI/CD å·¥ä½œæµ  
**æµ‹è¯•çŠ¶æ€**: âœ… å·²éªŒè¯  
**éƒ¨ç½²çŠ¶æ€**: ğŸš€ å‡†å¤‡å°±ç»ª